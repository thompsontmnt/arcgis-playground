# ArcGIS in React Playground

A small educational demo application showing how to draw, edit, select, measure, and manage **persisted geometries** on an ArcGIS-based map using React, TypeScript, Jotai, FastAPI, and the ArcGIS JavaScript API.

This project is not affiliated with any employer and is intended strictly for learning, exploration, and educational purposes.

---

The repo consists of two parts:

### 1. Frontend (React + ArcGIS JS API)
A map-driven interface that allows users to:

- Draw polygons  
- Edit existing geometries (reshape / vertex editing)  
- Select features bidirectionally (map → list, list → map)  
- Display measurements (area, perimeter)  
- View attributes and WKT representations  
- Zoom to selected features  
- Fit the map to all features  

### 2. Backend (FastAPI)
A simple REST API that persists geometries using:

- CRUD endpoints (`GET /geometry`, `POST /geometry`, `PUT /geometry/{id}`, `DELETE /geometry/{id}`)  
- WKT-based storage for simplicity and portability  
- JSON schema generated by FastAPI / Pydantic  

The frontend consumes these API endpoints via [hey-api OpenAPI](https://github.com/hey-api/openapi-ts) + TanStack Query to load and save all geometries.

---

App Overview

Map View

<img width="1501" height="799" alt="Screenshot 2025-11-25 at 8 03 10 PM" src="https://github.com/user-attachments/assets/4b0249e9-24ab-4042-9291-1ee3e6f3f4e1" />

Graphic selection

<img width="1499" height="800" alt="Screenshot 2025-11-25 at 8 04 15 PM" src="https://github.com/user-attachments/assets/0451d359-565b-4576-9db3-4cc4a1ea8569" />

Draw Polygon and persist graphic via API

![ScreenRecording2025-11-25at8 19 35PM-ezgif com-speed](https://github.com/user-attachments/assets/e83a4161-cd9f-40fd-b391-9c2481194093)


Zoom to different views

![ScreenRecording2025-11-25at8 06 46PM-ezgif com-speed](https://github.com/user-attachments/assets/2f7318f7-bf1d-4a56-a7fd-f22f9746357b)


---

# Architecture Overview
**Key principles:**

- Jotai atoms provide simple, explicit global state.
- Tools use a clean `activate()` / `deactivate()` lifecycle.
- A single graphics layer is used for all map geometry.
- Components reactively update based on selection state.

---

## Selection Model

The app uses `selectedGraphicsAtom` as the single source of truth.

- Map clicks update the atom.
- List clicks update the atom.
- Tools apply map-side highlighting.
- Panels read directly from the same atom.

This avoids multiple representations of “selected graphics” and keeps the logic consistent.

---

## Geometry Measurement

`measureGeometry.ts` computes:

- Area (m²)
- Perimeter / length (meters)

Polygon metrics use ArcGIS geometry utilities and standard unit conversions.

---

## WKT Conversion


WKT strings are converted using:

1. [Terraformer](https://github.com/terraformer-js/terraformer) (WKT → GeoJSON)
2. ArcGIS JSON utilities (GeoJSON → ArcGIS geometry)

Supported:
- Polygon
- Polyline
- Point
- MultiPolygon (flattened)

---

